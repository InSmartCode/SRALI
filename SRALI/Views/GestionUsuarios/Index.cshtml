@model List<SRALI.Models.V_UsuariosSistema>

@{
    ViewBag.Title = "Administrar Usuarios";

}

<!-- Bootstrap -->
<!--<link href="cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
<link href="~/Content/vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!-- Font Awesome -->
<!--<link href="~/Content/vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">-->
<!-- NProgress -->
<!--<link href="~/Content/vendors/nprogress/nprogress.css" rel="stylesheet">-->
<!-- iCheck -->
<!--<link href="~/Content/vendors/iCheck/skins/flat/green.css" rel="stylesheet">-->
<!-- Datatables -->
@*<link href="~/Content/plugins/datatables/DataTables-1.10.18/css/dataTables.foundation.min.css" rel="stylesheet" />*@
@*<link href="~/Content/plugins/datatables/DataTables-1.10.18/css/jquery.dataTables.min.css" rel="stylesheet" />*@
<!-- Datatables -->
@*<link href="cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">*@


<link href="~/Content/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="~/Content/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
<link href="~/Content/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet">
<link href="~/Content/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
<link href="~/Content/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet">

<!-- Custom Theme Style -->
<!--<link href="~/Content/build/css/custom.min.css" rel="stylesheet">-->


<!-- page content -->
<div class="page-title">
    <div class="title_left">
        <h2>| General > Usuarios del sistema </h2>
    </div>
    <div class="title_right">
        <div class="col-md-5 col-sm-5  form-group pull-right top_search">
        </div>
    </div>
</div>

<div class="clearfix"></div>

<div class="row">
    <div class="col-md-12 col-sm-12">
        <div class="x_panel">
            <div class="x_title">
                <h2>Listado de usuarios</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li>
                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                    </li>
                    <li>
                        <a class="close-link"><i class="fa fa-close"></i></a>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">

                <div class="table-responsive">

                    <table class="table table-striped table-bordered table-hover" id="sys-table">
                        @*<table id="datatable-buttons" class="table table-striped table-bordered" style="width:100%">*@


                        <thead>
                            <tr class="headings">
                                @*<th>
                                    <input type="checkbox" id="check-all" class="flat">
                                </th>*@
                                <th class="column-title">ID</th>
                                <th class="column-title">Usuario</th>
                                <th class="column-title">Nombre Completo</th>
                                <th class="column-title">Estado</th>
                                <th class="column-title">Correo</th>
                                <th class="column-title">Telefono</th>
                                @*<th class="column-title">
                                    <span class="nobr">Opciones</span>
                                </th>*@

                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewBag.Users)
                            {
                                <tr class="even pointer">
                                    @*<td class="a-center ">
                                        <input type="checkbox" class="flat" name="table_records">
                                    </td>*@
                                    <td>
                                        @item.id
                                    </td>
                                    <td>
                                        @item.nombre
                                    </td>
                                    <td>
                                        @item.nombreCompleto
                                    </td>
                                    <td>
                                        @item.estado
                                    </td>
                                    <td>
                                        @item.correo
                                    </td>
                                    <td>
                                        @item.telefono
                                    </td>

                                    @*<td>
                                        @Html.ActionLink("Edit", "Edit", new { id = item.id }) |
                                        @Html.ActionLink("Details", "Details", new { id = item.id }) |
                                        @Html.ActionLink("Delete", "Delete", new { id = item.id })
                                    </td>*@

                                </tr>
                            }
                        </tbody>
                    </table>

                </div>
                <br>
                <div class="x_panel">
                    <div class="actions">
                        <div class="inputs pull-right">
                            <button class="btn btn-round btn-primary btn-group-lg" onclick="Eliminar();"><i class="fa fa-trash"></i> Eliminar</button>
                        </div>

                        <div class="inputs pull-right">
                            <button class="btn btn-round btn-primary btn-group-lg" onclick="Editar();"><i class="fa fa-edit"></i> Modificar</button>
                        </div>

                        <div class="inputs pull-right">
                            <button class="btn btn-round btn-primary btn-group-lg" onclick="Nuevo();"><i class="fa fa-plus-circle"></i> Nuevo</button>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>


</div>

<!--MODAL-->
<div id="modal-container" class="modal fade draggable-modal modalx" tabindex="-1" data-backdrop="static" data-keyboard="false" role="alertdialog" aria-hidden="true">
    <div class="modal-dialog">
        <div id="modal-content" class="modal-content">
            <div class="modal-body" id="modal-body">



            </div>
            <div class="modal-footer">
                @* <button type="button" class="btn btn-circle btn-secondary btn-group-lg" id="btnCerrar" data-dismiss="modal">Cancelar</button>*@
                @*<input type="button" value="Cancelar" class="btn btn-circle btn-secondary btn-group-lg pull-right" id="btnCerrar" data-dismiss="modal" />
                    <input type="submit" value="Guardar" class="btn btn-primary pull-right" id="btnGuardar" />*@

            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script src="~/Content/plugins/datatables/datatables.min.js" type="text/javascript"></script>


    <!-- Datatables -->
    <script src="~/Content/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/Content/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script src="~/Content/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="~/Content/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
    <script src="~/Content/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
    <script src="~/Content/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="~/Content/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="~/Content/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
    <script src="~/Content/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="~/Content/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/Content/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
    <script src="~/Content/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
    <script src="~/Content/vendors/jszip/dist/jszip.min.js"></script>
    <script src="~/Content/vendors/pdfmake/build/pdfmake.min.js"></script>
    <script src="~/Content/vendors/pdfmake/build/vfs_fonts.js"></script>

    <!-- Custom Theme Scripts -->
    <!--<script src="../build/js/custom.min.js"></script>-->

    <script src="~/Content/vendors/datatables.net/js/jquery.dataTables.min.js"></script>

    <script>
        $('#sys-table').DataTable({
           "language": {
                "aria": {
                    "sortAscending": ": activate to sort column ascending",
                    "sortDescending": ": activate to sort column descending"
                },
                "emptyTable": "No data available in table",
                "info": "Mostrando pagina _PAGE_ de _PAGES_",
                "infoEmpty": "No se Encontraron Registros",
                "infoFiltered": "( Mostrando registros filtrados de un total de _MAX_ registros)",
                "lengthMenu": "_MENU_ Registros por Pag.",
                "search": "Buscar: ",
                "searchPlaceholder": "Informacion a buscar...",
                "zeroRecords": "No se encontraron registros...",
                "paginate": {
                    "first": "Primera",
                    "last": "Última",
                    "next": "Siguiente",
                    "previous": "Anterior"
                },


            },

           buttons: [
                    { extend: 'print', className: 'btn btn-circle  green btn-outline btn-group-lg ' },
                    { extend: 'pdf', className: 'btn btn-circle  green btn-outline btn-group-lg' },
                    { extend: 'csv', className: 'btn btn-circle  green btn-outline btn-group-lg' }
            ],

            "order": [
                [0, 'asc']
            ],

            "lengthMenu": [
                [5, 10, 15, 20, -1],
                [5, 10, 15, 20, "Todos"]
            ],
            "pageLength": 10
        });

        var idParametro = 0;
        var ultimaFila = null;
        var colorOriginalIMPAR = "#ffffff";
        var colorOriginalPAR = "#fbfcfd";

        $('#sys-table tbody').on('click', 'tr', function () {
            //var dato = $(this).find('td:first').html();

            var dato = $(this).find('td:nth-child(1)').html();
            idParametro = dato;
            if (ultimaFila != null) {
                var tipo = (idParametro % 2) ? "Impar" : "Par";
                if (tipo == "Impar") {
                    ultimaFila.css('background-color', colorOriginalIMPAR);
                } else {
                    ultimaFila.css('background-color', colorOriginalPAR);
                }
            }
            $(this).css('background-color', '#CEE3F6');
            ultimaFila = $(this);
        });

        $('#sys-table tbody').on('dblclick', 'tr', function () {
            var dato = $(this).find('td:nth-child(1)').html();
            idParametro = dato;
            alert("El registro seleccionado por  .dblclick() es: " + idParametro);
            //Editar();

        });

        function Eliminar() {
            if (idParametro != 0) {
                $("#modal-body").load("/AdminUsers/Delete/" + idParametro);
                $("#modal-container").modal('show');
            }
        }

        function Editar() {
            if (idParametro != 0) {
                $("#modal-body").load("/AdminUsers/Edit/" + idParametro);
                $("#modal-container").modal('show');
            }
        }

        function Nuevo() {
            $("#modal-body").load("/GestionUsuarios/Create");
            $("#modal-container").modal('show');
        }
    </script>

}

@section topLevel{
    @{Html.RenderPartial("_RenderConfirm.Modal"); }
}
